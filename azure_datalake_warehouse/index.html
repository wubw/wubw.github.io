
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Azure_Datalake_Warehouse &#8212; binwei  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="../about/" />
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
  
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  
  <link rel="alternate" type="application/atom+xml"  href="../blog/atom.xml" title="binwei Blog">
  
  
  <link href="True" rel="stylesheet">
  
  <style type="text/css">
    ul.ablog-archive {list-style: none; overflow: auto; margin-left: 0px}
    ul.ablog-archive li {float: left; margin-right: 5px; font-size: 80%}
    ul.postlist a {font-style: italic;}
    ul.postlist-style-disc {list-style-type: disc;}
    ul.postlist-style-none {list-style-type: none;}
    ul.postlist-style-circle {list-style-type: circle;}
  </style>

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="azure-datalake-warehouse">
<h1>Azure_Datalake_Warehouse<a class="headerlink" href="#azure-datalake-warehouse" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="datalake">
<h1>Datalake<a class="headerlink" href="#datalake" title="Permalink to this headline">¶</a></h1>
<p>Analyzing Big Data in Azure</p>
<ul class="simple">
<li>Data Lake Store: No limits data Lake</li>
<li>Data Lake Aanlytics: Analytics job service</li>
<li>HDInsight: Managed clusters</li>
</ul>
<p>Azure Data Lake Store</p>
<ul class="simple">
<li>WebHDFS compatible</li>
<li>Any size</li>
<li>Any format as-is</li>
<li>Write-once-read-many</li>
<li>Enterprise-grade security</li>
<li>The big data store in Azure</li>
</ul>
<p>Characteristics
Data Warehousing vs Data Lakes</p>
<ul class="simple">
<li>Data Warehousing</li>
</ul>
<ul class="simple">
<li>Structured data</li>
<li>Defined set of schemas</li>
<li>Requires Extract-Transform- Load (ET L) before storing</li>
<li>Known for some of us</li>
<li>Exploratory analysis is hard because of transforming the data</li>
</ul>
<ul class="simple">
<li>Data Lakes</li>
</ul>
<ul class="simple">
<li>Raw data (unstructured/semi-structured/structured)</li>
<li>“Dump” all your data in the lake</li>
<li>Data scientists will interpret data from the lake</li>
<li>Without metadata, turns in a data swamp pretty fast</li>
</ul>
<img alt="images/azure_datalake_warehouse_analytics.png" src="images/azure_datalake_warehouse_analytics.png" />
<p>Azure Data Lake Store vs Blob Storage</p>
<ul class="simple">
<li>No Limitations Store whatever you want in any format</li>
<li>Redundancy It’s there but no control over it</li>
<li>Security Built-in Azure Active Directory support</li>
<li>Built for Scale Optimized for high- scale reads</li>
<li>Pricing More expensive than Storage GRS</li>
<li>Integration With Data Factory, Data Catalog &amp; HDlnsight</li>
</ul>
<p>Full comparison on <a class="reference external" href="https://bit.ly/ads-vs-storage">https://bit.ly/ads-vs-storage</a></p>
<p>Azure Data Lake Analytics</p>
<ul class="simple">
<li>Run analytics jobs on managed clusters: No maintenance Serverless</li>
<li>Written in U-SQL: SQL Syntax and Extensibility in C#</li>
<li>Easily scaled with Analytics Units</li>
<li>Pay for processing time only</li>
</ul>
<p>Data Sources</p>
<ul class="simple">
<li>Built-in partitioned tables</li>
<li>Query data where it lives, No need to prepare data</li>
<li>One query that runs on multiple data stores</li>
<li>Use the correct data store for the job</li>
</ul>
<img alt="images/usql.png" src="images/usql.png" />
<p>Learn more!
Azure Data Architecture Guide
<a class="reference external" href="https://docs.microsoft.com/en-us/azure/architecture/data-guide/">https://docs.microsoft.com/en-us/azure/architecture/data-guide/</a></p>
<p>“Mastering Azure Analytics” by Zoiner Tejada
<a class="reference external" href="http://shop.oreilly.com/product/0636920050568.do">http://shop.oreilly.com/product/0636920050568.do</a></p>
<p>Azure Data Lake GitHub Repo
(<a class="reference external" href="https://azure.github.io/AzureDataLake/">https://azure.github.io/AzureDataLake/</a>)</p>
<p>U-SQL Documentation
<a class="reference external" href="https://usql.io">https://usql.io</a></p>
<p>MVA “Introducing Azure Data Lake”
<a class="reference external" href="https://bit.ly/intro-to-azure-data-lake">https://bit.ly/intro-to-azure-data-lake</a>
Retired course?</p>
<p>Azure Data Lake (ADL) makes processing Big Data simpler and more accessible by providing several key technologies. The U-SQL language is a powerful combination of SQL and C# that supports parallel execution.
Azure Data Factory (ADF) is a cloud-based data integration service that orchestrates and automate the movement and transformation of data.</p>
<p>The ADL-ADF&nbsp;integration allows you to:</p>
<ul class="simple">
<li>Move data from a given source to the ADL store</li>
<li>Create BigData ADF pipelines that run U-SQL as a processing step on the ADL Analytics service</li>
</ul>
<p>Data lake store:</p>
<ul class="simple">
<li>For cold data</li>
<li>Data lake analytics + data lake store</li>
</ul>
<p>Azure data lake analytics
HDInsight the developers need to care about the clusters
Azure data lake analytics developers just like Uber
USQL
Very good support from Visual studio compared to hadoop, hive directly
Vs can support playback the execution</p>
<p>Transform and Analyze</p>
<ul class="simple">
<li>Stream analytics</li>
<li>HDInsight (spark, storm, Hive, Pig, HBase)</li>
<li>Azure data lake analytics and U-SQL</li>
<li>Azure SQL Data Warehouse</li>
</ul>
<p>Data Lake Analytics (Analytics)
Run big data analysis jobs that scale to massive data sets.</p>
<p>Basic Data Lake Analytics process:</p>
<ul class="simple">
<li>Create a Data Lake Analytics account.</li>
<li>Prepare the source data. Data Lake Analytics jobs can read data from either Azure Data Lake Store accounts or Azure Blob storage accounts. In this example, we will read from Azure Data Lake Store.</li>
<li>Develop a U-SQL script.</li>
<li>Submit a job (U-SQL script) to the Data Lake Analytics account. The job reads from the source data, process the data as instructed in the U-SQL script, and then save the output to either a Data Lake Store account or a Blob storage account.</li>
</ul>
<p>U-SQL is a language that unifies the benefits of SQL with the expressive power of your own code to process all data at any scale. U-SQL’s scalable distributed query capability enables you to efficiently analyze data in the store and across relational stores such as Azure SQL Database. It enables you to process unstructured data by applying schema on read, insert custom logic and UDF’s, and includes extensibility to enable fine grained control over how to execute at scale.</p>
<p>Code example:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>    @searchlog =
EXTRACT UserId          int,
        Start           DateTime,
        Region          string,
        Query           string,
        Duration        int?,
        Urls            string,
        ClickedUrls     string
FROM &quot;/Samples/Data/SearchLog.tsv&quot;
USING Extractors.Tsv();
    OUTPUT @searchlog
TO &quot;/Output/SearchLog-from-Data-Lake.csv&quot;
USING Outputters.Csv();
</pre></div>
</div>
<p>Data Lake Store (Analytics)
Hyper-scale repository for your big data analytics
What is the benefit to use Data Lake Store?</p>
</div>
<div class="section" id="sql-data-warehouse">
<h1>SQL Data Warehouse<a class="headerlink" href="#sql-data-warehouse" title="Permalink to this headline">¶</a></h1>
<p>Fast provisioning and scale
Storage and compute service is separated</p>
<p>PolyBase technology: simplfy and enable distributed analytics
Polybase allows you to leverage your data from different sources by using familiar T-SQL commands. Polybase enables you to query non-relational data held in Azure Blob storage as though it is a regular table. Use Polybase to query non-relational data, or to import non-relational data into SQL Data Warehouse.</p>
<p>Pricing - DWU (Data Warehouse Units) What the hell is DWU calculated?
MMP (Massively parallel processing)
Built on SQL server engine. It is SQL on SQL
Distribution mode: round_robin(random), or on a key using hash. (check the row count to see whether the distribution is even)</p>
<p>Unsuitable workloads
Operational workloads (OLTP)</p>
<ul class="simple">
<li>High frequency reads &amp; writes</li>
<li>Large numbers of singleton selects</li>
<li>High volumes of single row inserts</li>
</ul>
<p>Procedural ETC</p>
<ul class="simple">
<li>Row by row processing needs</li>
<li>Incompatible formats (JSON, XML)</li>
</ul>
<p>Guidance
Keep column definitions strongly typed
Distribution key is read only: Aim for a not null definition for distribution key
Ensure columns are defined consistently: Especially true for the distribution key
Hash distribution optimises data layout: JOIN and GROUP BY columns are often the best candidates
Partition for data management: Consider columns used in the WHERE clause, Evaluate query date ranges (month, quarter) as part of the partitioning strategy</p>
<p>Loading compressed text
Guidance
Evenly split the data into multiple files
One file per reader</p>
<p>Good links:
<a class="reference external" href="https://azure.microsoft.com/en-us/documentation/articles/sql-data-warehouse-overview-what-is/#data-warehouse-units">https://azure.microsoft.com/en-us/documentation/articles/sql-data-warehouse-overview-what-is/#data-warehouse-units</a>
<a class="reference external" href="https://azure.microsoft.com/en-us/documentation/articles/sql-data-warehouse-load-polybase-guide/">https://azure.microsoft.com/en-us/documentation/articles/sql-data-warehouse-load-polybase-guide/</a></p>
<img alt="images/sql-data-warehouse-diagram.png" src="images/sql-data-warehouse-diagram.png" />
<p>When create a new data warehouse, it is necessary to specify database name and server.
Setup firewall rule for connection from the local computer (On SQL servers blade rather than on SQL databases)
Request and sessions are logically represented by their respective identifiers</p>
<p>Visual Studio has: 1. Server Explorer, 2. SQL Server Object Explorer</p>
<p>Data Factory:</p>
<ul class="simple">
<li>create linked services, datasets, pipelines for source (blob), target (datawarehouse)</li>
<li>table and columns need to be setup in datawarehouse</li>
</ul>
<p><a class="reference external" href="https://www.talend.com/resources/data-lake-vs-data-warehouse/">https://www.talend.com/resources/data-lake-vs-data-warehouse/</a></p>
<p>SQL Data Warehouse (Data &amp; Storage)
Azure SQL Data Warehouse is a scale out database service designed to answer your ad hoc queries and questions. By spreading your data across distributions SQL Data Warehouse is designed for analytics at scale. To make the most of your database there are opportunities to tailor your table design and optimize for performance.
SQL on SQL</p>
<p>Azure Data Warehouse
If the data is less than 1 TB, it is not a big data problem. Use SQL server directly.
Can pause the data warehouse, then not charge anymore
Polybase</p>
</div>

  <div class="section">
  
    


<div class="section">
  <span style="float: left;">
  
  
  <a href="../2019/application_insight_introduction/">
    <i class="fa fa-arrow-circle-left"></i>
    Application Insight Introduction
  </a>
  
  </span>
  <span>&nbsp;</span>
  <span style="float: right;">
  
  
  <a href="../2019/user_story_applied/">
    User Story Applied
    <i class="fa fa-arrow-circle-right"></i>
  </a>
  </span>
  
</div>

  
  
    <div class="section">
    <h2>Comments</h2>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'wubw-github-io';
        var disqus_identifier = '/azure_datalake_warehouse/';
        var disqus_title = 'Azure_Datalake_Warehouse';
        var disqus_url = 'https://wubw.github.io/azure_datalake_warehouse';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  
  </div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../">
    <img class="logo" src="../_static/logo.jpg" alt="Logo"/>
    
  </a>
</p>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=wubw&repo=BinweiBlog&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>






  
  
  <h2>
  
  <i class="fa fa-calendar"></i>
    21 April 2019
  
  </h2>

  <ul>
    

  

  

  

  

  
  
  <li id="comments">
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'wubw-github-io'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
    <i class="fa-fw fa fa-comments"></i>
    <a href="#disqus_thread" data-disqus-identifier="/azure_datalake_warehouse/"> </a>
  </li>
  
  </ul>


<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/">About binwei</a></li>
</ul>


  <h3><a href="../blog/">Recent Posts</a></h3>
  <ul>
    
    
      <li><a href="../2019/user_story_applied/">21 April - User Story Applied</a></li>
    
      <li><a href="../2019/application_insight_introduction/">20 April - Application Insight Introduction</a></li>
    
      <li><a href="../2019/azure_security/">19 April - Azure Security</a></li>
    
      <li><a href="../2019/iot_for_smartcities/">10 February - Iot for Smart Cities</a></li>
    
      <li><a href="../2019/agile_selling/">27 January - Agile Selling</a></li>
    
  </ul>

  <h3><a href="../blog/tag/">Tags</a></h3>
  <style type="text/css">
    ul.ablog-cloud {list-style: none; overflow: auto;}
    ul.ablog-cloud li {float: left; height: 20pt; line-height: 18pt; margin-right: 5px;}
    ul.ablog-cloud a {text-decoration: none; vertical-align: middle;}
    li.ablog-cloud-1{font-size: 80%;}
    li.ablog-cloud-2{font-size: 95%;}
    li.ablog-cloud-3{font-size: 110%;}
    li.ablog-cloud-4{font-size: 125%;}
    li.ablog-cloud-5{font-size: 140%;}
  </style>
  <ul class="ablog-cloud">
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/ai/">ai</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/architecture/">architecture</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/backend/">backend</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/blockchain/">blockchain</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/blog/">blog</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-5">
        <a href="../blog/tag/booknotes/">booknotes</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../blog/tag/career/">career</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/chinese/">chinese</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/cloud/">cloud</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/continuousdelivery/">continuousdelivery</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/database/">database</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/devops/">devops</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/docker/">docker</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/frontend/">frontend</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../blog/tag/git/">git</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/iot/">iot</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/lean/">lean</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/nosql/">nosql</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/opensource/">opensource</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../blog/tag/process/">process</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/reading/">reading</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/sales/">sales</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-3">
        <a href="../blog/tag/security/">security</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/shell/">shell</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/smartcity/">smartcity</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/telemetry/">telemetry</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/vi/">vi</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/web/">web</a></li>
      
    
  </ul>

  <h3><a href="../blog/category/">Categories</a></h3>
  <ul>
  
    
    <li><a href="../blog/category/business/">Business (1)</a></li>
    
  
    
    <li><a href="../blog/category/computerscience/">ComputerScience (33)</a></li>
    
  
    
    <li><a href="../blog/category/life/">Life (1)</a></li>
    
  
    
    <li><a href="../blog/category/literature/">Literature (3)</a></li>
    
  
    
    <li><a href="../blog/category/management/">Management (13)</a></li>
    
  
  </ul>

  <h3><a href="../blog/archive/">Archives</a></h3>
  <ul>
  
    
    <li><a href="../blog/2019/">2019 (7)</a></li>
    
  
    
    <li><a href="../blog/2018/">2018 (11)</a></li>
    
  
    
    <li><a href="../blog/2017/">2017 (34)</a></li>
    
  
  </ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, binwei.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="../_sources/azure_datalake_warehouse.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-97414429-1']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    
  </body>
</html>