<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Azure Design Pattern - Binwei's Blog</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Binwei's Blog</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Welcome to Binwei's Blog</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">2017</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../2017/authenticate_by_openidconnect/" class="dropdown-item">Authenticate Node.js App by OpenId Connect</a>
</li>
                                    
<li>
    <a href="../../2017/bash_useful_commands/" class="dropdown-item">How to Become an Outlier</a>
</li>
                                    
<li>
    <a href="../../2017/become_outlier/" class="dropdown-item">How to Become an Outlier</a>
</li>
                                    
<li>
    <a href="../../2017/blockchain_introduction/" class="dropdown-item">Blockchain Introduction</a>
</li>
                                    
<li>
    <a href="../../2017/book-bian_zhi_lin_shi_xuan/" class="dropdown-item">Book notes: Bian Zhi Lin Anthology</a>
</li>
                                    
<li>
    <a href="../../2017/book-cai_gen_tan/" class="dropdown-item">Book Notes: Cai Gen Tan</a>
</li>
                                    
<li>
    <a href="../../2017/cloud_for_dummy/" class="dropdown-item">Cloud for Dummy</a>
</li>
                                    
<li>
    <a href="../../2017/devops_and_continuous_delivery/" class="dropdown-item">DevOps and Continuous Delivery</a>
</li>
                                    
<li>
    <a href="../../2017/domain_driven_design_introduction/" class="dropdown-item">Domain Driven Design: Introduction</a>
</li>
                                    
<li>
    <a href="../../2017/git_areas/" class="dropdown-item">Git: Areas</a>
</li>
                                    
<li>
    <a href="../../2017/git_branch-basic/" class="dropdown-item">Git: Branch Basic</a>
</li>
                                    
<li>
    <a href="../../2017/git_branch-continued/" class="dropdown-item">Git: Branch Continue</a>
</li>
                                    
<li>
    <a href="../../2017/git_getting-started/" class="dropdown-item">Git: Getting Started</a>
</li>
                                    
<li>
    <a href="../../2017/git_resolve-conflicts/" class="dropdown-item">Git: Resolve Conflicts</a>
</li>
                                    
<li>
    <a href="../../2017/how_to_read_books/" class="dropdown-item">How to Read Books</a>
</li>
                                    
<li>
    <a href="../../2017/introduction_to_javascript/" class="dropdown-item">Introduction to Javascript</a>
</li>
                                    
<li>
    <a href="../../2017/job_security/" class="dropdown-item">Job Security</a>
</li>
                                    
<li>
    <a href="../../2017/kotter_binwei_change_model/" class="dropdown-item">Kotter-Binwei Change Model</a>
</li>
                                    
<li>
    <a href="../../2017/lean_principles/" class="dropdown-item">Lean: Principles</a>
</li>
                                    
<li>
    <a href="../../2017/lean_toolkit_for_software_development/" class="dropdown-item">Lean Toolkit for Software Development</a>
</li>
                                    
<li>
    <a href="../../2017/nosql_introduction/" class="dropdown-item">NoSQL: Introduction</a>
</li>
                                    
<li>
    <a href="../../2017/security_owasp_top_10/" class="dropdown-item">Security: Owasp Top 10</a>
</li>
                                    
<li>
    <a href="../../2017/setup-blog_using-sphinx-ablog/" class="dropdown-item">Setup Blog: Using Sphinx and Ablog</a>
</li>
                                    
<li>
    <a href="../../2017/specification_by_example/" class="dropdown-item">Specification by Example</a>
</li>
                                    
<li>
    <a href="../../2017/technology_to_learn_next/" class="dropdown-item">Technology to Learn Next</a>
</li>
                                    
<li>
    <a href="../../2017/telemetry_overview/" class="dropdown-item">Telemetry: Overview</a>
</li>
                                    
<li>
    <a href="../../2017/the_art_of_simplicity/" class="dropdown-item">The Art of Simplicity</a>
</li>
                                    
<li>
    <a href="../../2017/the_effective_executive/" class="dropdown-item">The Effective Executive</a>
</li>
                                    
<li>
    <a href="../../2017/the_mckinsey_engagement/" class="dropdown-item">The Mckinsey Engagement</a>
</li>
                                    
<li>
    <a href="../../2017/the_mythical_deadline_of_peopleware_man_month/" class="dropdown-item">The Mythical Deadline of Peopleware Man-month</a>
</li>
                                    
<li>
    <a href="../../2017/threat_modeling_introduction/" class="dropdown-item">Threat Modeling: Introduction</a>
</li>
                                    
<li>
    <a href="../../2017/vi_configuration-example/" class="dropdown-item">Vi: Configuration Example</a>
</li>
                                    
<li>
    <a href="../../2017/work_in_big_company/" class="dropdown-item">Work in Big Company</a>
</li>
                                    
<li>
    <a href="../../2017/xunit_test_patterns/" class="dropdown-item">Xunit Test Patterns</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">2018</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../2018/ai_for_smartcities/" class="dropdown-item">AI for Smart Cities</a>
</li>
                                    
<li>
    <a href="../../2018/authentication_authorization_explainations/" class="dropdown-item">Authentication &amp; Authorization Basic</a>
</li>
                                    
<li>
    <a href="../../2018/blockchain_scenario/" class="dropdown-item">Blockchain Scenario</a>
</li>
                                    
<li>
    <a href="../../2018/career_advice/" class="dropdown-item">职场菜根谭</a>
</li>
                                    
<li>
    <a href="../../2018/cryptography_introduction/" class="dropdown-item">Cryptography Introduction (with .NET code example)</a>
</li>
                                    
<li>
    <a href="../../2018/docker_introduction/" class="dropdown-item">Docker Introduction</a>
</li>
                                    
<li>
    <a href="../../2018/https/" class="dropdown-item">Https Explainations</a>
</li>
                                    
<li>
    <a href="../../2018/microservices_introduction/" class="dropdown-item">Microservices Introduction</a>
</li>
                                    
<li>
    <a href="../../2018/nodejs_basics/" class="dropdown-item">Node.js Basics</a>
</li>
                                    
<li>
    <a href="../../2018/personal_branding/" class="dropdown-item">Personal Branding</a>
</li>
                                    
<li>
    <a href="../../2018/the_personal_mba/" class="dropdown-item">The Personal MBA</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">2019</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../2019/agile_selling/" class="dropdown-item">Agile Selling</a>
</li>
                                    
<li>
    <a href="../../2019/application_insight_introduction/" class="dropdown-item">Application Insight Introduction</a>
</li>
                                    
<li>
    <a href="../../2019/azure_datalake_warehouse/" class="dropdown-item">Azure Data Lake and Warehouse</a>
</li>
                                    
<li>
    <a href="../../2019/azure_security/" class="dropdown-item">Azure Security</a>
</li>
                                    
<li>
    <a href="../../2019/cyber_security_for_blockchain/" class="dropdown-item">Cyber Security for Blockchain</a>
</li>
                                    
<li>
    <a href="../../2019/iot_for_smartcities/" class="dropdown-item">Iot for Smart Cities</a>
</li>
                                    
<li>
    <a href="../../2019/machine_learning_basic/" class="dropdown-item">Machine Learning Basic</a>
</li>
                                    
<li>
    <a href="../../2019/user_story_applied/" class="dropdown-item">User Story Applied</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">2020</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../about_consulting/" class="dropdown-item">About Consulting</a>
</li>
                                    
<li>
    <a href="../arduino_introduction/" class="dropdown-item">Arduino Introduction</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Azure Design Pattern</a>
</li>
                                    
<li>
    <a href="../china_70_anniversary_bigdata/" class="dropdown-item">China 70 Anniversary Big Data</a>
</li>
                                    
<li>
    <a href="../data_science_basic/" class="dropdown-item">Data Science Basic</a>
</li>
                                    
<li>
    <a href="../enlightenment_from_singing/" class="dropdown-item">Enlightenment from Singing</a>
</li>
                                    
<li>
    <a href="../intelligent_web_sentences/" class="dropdown-item">Intelligent Web Sentences</a>
</li>
                                    
<li>
    <a href="../mac_tips/" class="dropdown-item">Mac Tips</a>
</li>
                                    
<li>
    <a href="../xiao_gou_qian_qian/" class="dropdown-item">Book note: Xiao Gou Qian Qian</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">2021</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../2021/measure_anything/" class="dropdown-item">Measure Anything</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../arduino_introduction/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../china_70_anniversary_bigdata/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#azure-design-pattern" class="nav-link">Azure Design Pattern</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#table-of-contents" class="nav-link">Table of Contents</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#introduction" class="nav-link">Introduction</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#data-management-and-performance" class="nav-link">Data Management and Performance</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#availability-and-resilience" class="nav-link">Availability and resilience</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#design-and-implementation" class="nav-link">Design and Implementation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#resources" class="nav-link">Resources</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="azure-design-pattern">Azure Design Pattern</h1>
<p><strong>Published:</strong> May 01, 2020<br />
<strong>Tags:</strong> cloud, architecture<br />
<strong>Category:</strong> ComputerScience</p>
<p>Just like programming, for many technical challenges for using cloud and Azure there are best practices.
We call these best practices as Design Pattern.
This blog introduce these design patterns and also discuss relevant tools on Azure.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#data-management-and-performance">Data Management and Performance</a></li>
<li><a href="#event-sourcing">Event sourcing</a></li>
<li><a href="#sharding-pattern">Sharding Pattern</a></li>
<li><a href="#static-content-hosting-pattern">Static Content Hosting Pattern</a></li>
<li><a href="#the-cache-aside-pattern">The Cache-aside Pattern</a></li>
<li><a href="#cqrs-pattern">CQRS pattern</a></li>
<li><a href="#availability-and-resilience">Availability and resilience</a></li>
<li><a href="#circuit-breaker-pattern">Circuit Breaker Pattern</a></li>
<li><a href="#compensating-transaction-pattern">Compensating Transaction Pattern</a></li>
<li><a href="#health-endpoint-monitoring-pattern">Health Endpoint Monitoring Pattern</a></li>
<li><a href="#queue-based-load-levelling-pattern">Queue-based load levelling pattern</a></li>
<li><a href="#retry-pattern">Retry pattern</a></li>
<li><a href="#throttling-pattern">Throttling Pattern</a></li>
<li><a href="#design-and-implementation">Design and Implementation</a></li>
<li><a href="#external-configuration-store-pattern">External Configuration Store Pattern</a></li>
<li><a href="#federated-identity-pattern">Federated Identity Pattern</a></li>
<li><a href="#gatekeeper-pattern">Gatekeeper Pattern</a></li>
<li><a href="#runtime-reconfiguration-pattern">Runtime Reconfiguration Pattern</a></li>
<li><a href="#valet-key-pattern">Valet Key Pattern</a></li>
<li><a href="#resources">Resources</a></li>
</ul>
<h2 id="introduction">Introduction</h2>
<p>We categorize the design patterns into followings:</p>
<p><strong>Design and Implementation</strong></p>
<ul>
<li>External Config Store</li>
<li>Federated Identity</li>
<li>Gatekeeper</li>
<li>Runtime Reconfiguration</li>
<li>Valet Key</li>
</ul>
<p><strong>Data Management and Performance</strong></p>
<ul>
<li>Automatic Scaling</li>
<li>Cache-aside</li>
<li>CQRS</li>
<li>Event sourcing</li>
<li>Sharding</li>
<li>Static content hosting</li>
</ul>
<p><strong>Availability and resilience</strong></p>
<ul>
<li>Circuit breaker</li>
<li>Compensating transaction</li>
<li>Health endpoint monitoring</li>
<li>Queue-based loading levelling</li>
<li>Retry</li>
<li>Throttling</li>
</ul>
<h2 id="data-management-and-performance">Data Management and Performance</h2>
<h3 id="event-sourcing">Event sourcing</h3>
<p>The problem with storing the current state of the data</p>
<ul>
<li>direct CRUD operations slow down Performance</li>
<li>data conflicts</li>
<li>shaping data is difficult</li>
</ul>
<p>The Event Sourcing Pattern</p>
<p><img alt="Event Sourcing" src="../images/event_sourcing.png" /></p>
<p>Things to consider:</p>
<ul>
<li>Get the current state by replaying events for an entity (id)</li>
<li>Event sequence</li>
<li>Event version</li>
<li>Backup/restore/retention</li>
<li>Append only</li>
<li>Lag in publishing and processing events will cause eventual consistency</li>
<li>Event consumers should only process events once</li>
<li>Event sourcing is complex to implement</li>
</ul>
<p>Possible framework: 
NEventStore -&gt; open source event store</p>
<h3 id="sharding-pattern">Sharding Pattern</h3>
<p>The problem with having a single database</p>
<ul>
<li>scaling your database up (more resources) isn't sufficient</li>
<li>data needs to be stored in specific geographics regions</li>
</ul>
<p>Possible framework:
Elastic DB Tools for Azure </p>
<h3 id="static-content-hosting-pattern">Static Content Hosting Pattern</h3>
<p>When to use this pattern:</p>
<ul>
<li>increase application Performance</li>
<li>decrease resource costs</li>
<li>increase content availability</li>
</ul>
<p>Things to consider:</p>
<ul>
<li>design a deployment strategy - for application and content</li>
<li>should only be accessible to the target audience</li>
<li>use https where possible</li>
<li>secure the content (valet key token)</li>
<li>for more advanced capability - use a content delivery network (CDN)</li>
</ul>
<p><img alt="Static Content Hosting Pattern" src="../images/static_content_hosting_pattern.png" /></p>
<p>Azure CDN</p>
<ul>
<li>Azure CDN profile</li>
<li>Azure blob storage</li>
<li>website</li>
<li>points of presence (POP)</li>
</ul>
<h3 id="the-cache-aside-pattern">The Cache-aside Pattern</h3>
<p>Pick the right data to be cached</p>
<ul>
<li>simple data</li>
<li>data that is needed often</li>
<li>and doesn't change often</li>
</ul>
<p><img alt="The Cache-aside Pattern" src="../images/the_cache_aside_pattern.png" /></p>
<p>Things to be considered:</p>
<ul>
<li>Consistency isn't guaranteed by the pattern</li>
<li>data can be changed by other processes</li>
<li>most caches have expiration policies</li>
<li>balance between performance and consistency</li>
<li>to optimize performance, pre-populate the cache</li>
<li>and pick when data to pre-populate</li>
</ul>
<p>About Azure Redis Cache</p>
<ul>
<li>cache-as-a-service</li>
<li>in-memory data structure store</li>
<li>recommended cache to use with Azure</li>
<li>based on the open source redis platform</li>
<li>highly available (99.9%)</li>
<li>key/value structure</li>
<li>publish/subscribe</li>
<li>premium features</li>
<li>data persistence</li>
<li>redis cluster</li>
</ul>
<h3 id="cqrs-pattern">CQRS pattern</h3>
<p>The problem with mixing reads and writes</p>
<ul>
<li>simulaneous transactions lead to data contention and conflicts</li>
<li>services and data sources and expensive to scale</li>
<li>security isn't granular</li>
</ul>
<p><img alt="Problems with Mixing Reads and Writes" src="../images/problems_with_mixing_reads_and_writes.png" /></p>
<p>CQRS pattern looks like following:</p>
<p><img alt="Event Sourcing and CQRS" src="../images/event_sourcing_and_cqrs.png" /></p>
<h2 id="availability-and-resilience">Availability and resilience</h2>
<h3 id="circuit-breaker-pattern">Circuit Breaker Pattern</h3>
<ul>
<li>Non-transient failures</li>
<li>Retrying will waste resources</li>
<li>Waiting on a timeout also wastes resources</li>
</ul>
<p><img alt="Circuit Breaker Pattern" src="../images/circuit_breaker_pattern.png" /></p>
<p>Can change the state to half-open:</p>
<ul>
<li>Amount of errors</li>
<li>Type of errors</li>
<li>After a predetermined time</li>
</ul>
<p>Open source library -&gt; polly:
https://github.com/App-vNext/Polly/wiki/Circuit-Breaker</p>
<h3 id="compensating-transaction-pattern">Compensating Transaction Pattern</h3>
<p>reverting failed steps in distributed system is difficult</p>
<p><img alt="Compensating Transaction Pattern" src="../images/compensating_transaction_pattern.png" /></p>
<h3 id="health-endpoint-monitoring-pattern">Health Endpoint Monitoring Pattern</h3>
<p>Technical challenges:</p>
<ul>
<li>Monitoring tools are too simple</li>
<li>The system doesn't provide enough information</li>
</ul>
<p><img alt="Health Endpoint Monitoring Pattern" src="../images/health_endpoint_monitoring_pattern.png" /></p>
<p>Possible solutions:</p>
<ul>
<li>Azure Monitor</li>
<li>Azure Advisor</li>
<li>Azure Resource Health</li>
<li>Azure Network Watcher</li>
<li>Security Center</li>
<li>Application Insights</li>
<li>Operation Management Suite</li>
</ul>
<h3 id="queue-based-load-levelling-pattern">Queue-based load levelling pattern</h3>
<p>The problem with calling services directly</p>
<ul>
<li>Not scalable</li>
<li>Diminish availability</li>
<li>Growing costs</li>
</ul>
<p>Possible solution: Azure storage queue</p>
<h3 id="retry-pattern">Retry pattern</h3>
<p>Azure storage has retry policy by default</p>
<h3 id="throttling-pattern">Throttling Pattern</h3>
<p><img alt="Throttling Pattern" src="../images/throttling_pattern.png" /></p>
<ul>
<li>To handle sudden increases in traffic</li>
<li>To guarantee application uptime</li>
<li>To prevent specific users or tenants from overloading the application</li>
</ul>
<p>Possible solution:
API management</p>
<h2 id="design-and-implementation">Design and Implementation</h2>
<h3 id="external-configuration-store-pattern">External Configuration Store Pattern</h3>
<p>Technical challenges:</p>
<ul>
<li>Configuration is part of the deployment</li>
<li>Multiple applications use the same configuration</li>
<li>Hard to control access rights</li>
</ul>
<p>When to use pattern</p>
<ul>
<li>Share configuration</li>
<li>Manage configuration centrally</li>
<li>Audit configuration access</li>
</ul>
<p>Azure Key Vault</p>
<ul>
<li>Stores (Certificates, Keys, Secretes)</li>
<li>Logging</li>
<li>Highly available</li>
<li>Backed-up</li>
</ul>
<h3 id="federated-identity-pattern">Federated Identity Pattern</h3>
<p>Why:</p>
<ul>
<li>Single sing-on</li>
<li>Authenticate 'external' users B2B &amp; B2C</li>
<li>Different tenants, different IDPs</li>
</ul>
<p>Azure Active Directory</p>
<ul>
<li>Identity as a service</li>
<li>Authentication</li>
<li>Multi-factor authentication</li>
<li>Advanced threat detection</li>
</ul>
<h3 id="gatekeeper-pattern">Gatekeeper Pattern</h3>
<p>Azure Gateway -&gt; only expose things necessary</p>
<p><img alt="Gatekeeper Pattern" src="../images/gatekeeper_pattern.png" /></p>
<p>Things to consider:</p>
<ul>
<li>Sensitive information, in a high security environment</li>
<li>Distributed system where you need centralized filtering and monitoring</li>
<li>However, performance impact of gateway may be high</li>
</ul>
<h3 id="runtime-reconfiguration-pattern">Runtime Reconfiguration Pattern</h3>
<p>Things to consider:</p>
<ul>
<li>External configuration</li>
<li>Get changes: use the hosting environment to subscribe to changes; poll for changes</li>
<li>Apply changes: apply changes at runtime; restart only when needed</li>
</ul>
<p>.net core has the support </p>
<h3 id="valet-key-pattern">Valet Key Pattern</h3>
<p><img alt="Valet Key Pattern" src="../images/valet_key_pattern.png" /></p>
<p><img alt="Valet Key Pattern Demo" src="../images/valet_key_pattern_demo.png" /></p>
<h2 id="resources">Resources</h2>
<p>https://github.com/bmaluijb/CloudDesignPatterns</p>
<p>https://docs.microsoft.com/en-us/azure/architecture/patterns/</p>
<p><em>Written by Binwei@Singapore</em></p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
