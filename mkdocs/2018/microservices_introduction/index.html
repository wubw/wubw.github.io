<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Microservices Introduction - Binwei's Blog</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Binwei's Blog</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Welcome to Binwei's Blog</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">2017</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../2017/authenticate_by_openidconnect/" class="dropdown-item">Authenticate Node.js App by OpenId Connect</a>
</li>
                                    
<li>
    <a href="../../2017/bash_useful_commands/" class="dropdown-item">How to Become an Outlier</a>
</li>
                                    
<li>
    <a href="../../2017/become_outlier/" class="dropdown-item">How to Become an Outlier</a>
</li>
                                    
<li>
    <a href="../../2017/blockchain_introduction/" class="dropdown-item">Blockchain Introduction</a>
</li>
                                    
<li>
    <a href="../../2017/book-bian_zhi_lin_shi_xuan/" class="dropdown-item">Book notes: Bian Zhi Lin Anthology</a>
</li>
                                    
<li>
    <a href="../../2017/book-cai_gen_tan/" class="dropdown-item">Book Notes: Cai Gen Tan</a>
</li>
                                    
<li>
    <a href="../../2017/cloud_for_dummy/" class="dropdown-item">Cloud for Dummy</a>
</li>
                                    
<li>
    <a href="../../2017/devops_and_continuous_delivery/" class="dropdown-item">DevOps and Continuous Delivery</a>
</li>
                                    
<li>
    <a href="../../2017/domain_driven_design_introduction/" class="dropdown-item">Domain Driven Design: Introduction</a>
</li>
                                    
<li>
    <a href="../../2017/git_areas/" class="dropdown-item">Git: Areas</a>
</li>
                                    
<li>
    <a href="../../2017/git_branch-basic/" class="dropdown-item">Git: Branch Basic</a>
</li>
                                    
<li>
    <a href="../../2017/git_branch-continued/" class="dropdown-item">Git: Branch Continue</a>
</li>
                                    
<li>
    <a href="../../2017/git_getting-started/" class="dropdown-item">Git: Getting Started</a>
</li>
                                    
<li>
    <a href="../../2017/git_resolve-conflicts/" class="dropdown-item">Git: Resolve Conflicts</a>
</li>
                                    
<li>
    <a href="../../2017/how_to_read_books/" class="dropdown-item">How to Read Books</a>
</li>
                                    
<li>
    <a href="../../2017/introduction_to_javascript/" class="dropdown-item">Introduction to Javascript</a>
</li>
                                    
<li>
    <a href="../../2017/job_security/" class="dropdown-item">Job Security</a>
</li>
                                    
<li>
    <a href="../../2017/kotter_binwei_change_model/" class="dropdown-item">Kotter-Binwei Change Model</a>
</li>
                                    
<li>
    <a href="../../2017/lean_principles/" class="dropdown-item">Lean: Principles</a>
</li>
                                    
<li>
    <a href="../../2017/lean_toolkit_for_software_development/" class="dropdown-item">Lean Toolkit for Software Development</a>
</li>
                                    
<li>
    <a href="../../2017/nosql_introduction/" class="dropdown-item">NoSQL: Introduction</a>
</li>
                                    
<li>
    <a href="../../2017/security_owasp_top_10/" class="dropdown-item">Security: Owasp Top 10</a>
</li>
                                    
<li>
    <a href="../../2017/setup-blog_using-sphinx-ablog/" class="dropdown-item">Setup Blog: Using Sphinx and Ablog</a>
</li>
                                    
<li>
    <a href="../../2017/specification_by_example/" class="dropdown-item">Specification by Example</a>
</li>
                                    
<li>
    <a href="../../2017/technology_to_learn_next/" class="dropdown-item">Technology to Learn Next</a>
</li>
                                    
<li>
    <a href="../../2017/telemetry_overview/" class="dropdown-item">Telemetry: Overview</a>
</li>
                                    
<li>
    <a href="../../2017/the_art_of_simplicity/" class="dropdown-item">The Art of Simplicity</a>
</li>
                                    
<li>
    <a href="../../2017/the_effective_executive/" class="dropdown-item">The Effective Executive</a>
</li>
                                    
<li>
    <a href="../../2017/the_mckinsey_engagement/" class="dropdown-item">The Mckinsey Engagement</a>
</li>
                                    
<li>
    <a href="../../2017/the_mythical_deadline_of_peopleware_man_month/" class="dropdown-item">The Mythical Deadline of Peopleware Man-month</a>
</li>
                                    
<li>
    <a href="../../2017/threat_modeling_introduction/" class="dropdown-item">Threat Modeling: Introduction</a>
</li>
                                    
<li>
    <a href="../../2017/vi_configuration-example/" class="dropdown-item">Vi: Configuration Example</a>
</li>
                                    
<li>
    <a href="../../2017/work_in_big_company/" class="dropdown-item">Work in Big Company</a>
</li>
                                    
<li>
    <a href="../../2017/xunit_test_patterns/" class="dropdown-item">Xunit Test Patterns</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">2018</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../ai_for_smartcities/" class="dropdown-item">AI for Smart Cities</a>
</li>
                                    
<li>
    <a href="../authentication_authorization_explainations/" class="dropdown-item">Authentication &amp; Authorization Basic</a>
</li>
                                    
<li>
    <a href="../blockchain_scenario/" class="dropdown-item">Blockchain Scenario</a>
</li>
                                    
<li>
    <a href="../career_advice/" class="dropdown-item">职场菜根谭</a>
</li>
                                    
<li>
    <a href="../cryptography_introduction/" class="dropdown-item">Cryptography Introduction (with .NET code example)</a>
</li>
                                    
<li>
    <a href="../docker_introduction/" class="dropdown-item">Docker Introduction</a>
</li>
                                    
<li>
    <a href="../https/" class="dropdown-item">Https Explainations</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Microservices Introduction</a>
</li>
                                    
<li>
    <a href="../nodejs_basics/" class="dropdown-item">Node.js Basics</a>
</li>
                                    
<li>
    <a href="../personal_branding/" class="dropdown-item">Personal Branding</a>
</li>
                                    
<li>
    <a href="../the_personal_mba/" class="dropdown-item">The Personal MBA</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">2019</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../2019/agile_selling/" class="dropdown-item">Agile Selling</a>
</li>
                                    
<li>
    <a href="../../2019/application_insight_introduction/" class="dropdown-item">Application Insight Introduction</a>
</li>
                                    
<li>
    <a href="../../2019/azure_datalake_warehouse/" class="dropdown-item">Azure Data Lake and Warehouse</a>
</li>
                                    
<li>
    <a href="../../2019/azure_security/" class="dropdown-item">Azure Security</a>
</li>
                                    
<li>
    <a href="../../2019/cyber_security_for_blockchain/" class="dropdown-item">Cyber Security for Blockchain</a>
</li>
                                    
<li>
    <a href="../../2019/iot_for_smartcities/" class="dropdown-item">Iot for Smart Cities</a>
</li>
                                    
<li>
    <a href="../../2019/machine_learning_basic/" class="dropdown-item">Machine Learning Basic</a>
</li>
                                    
<li>
    <a href="../../2019/user_story_applied/" class="dropdown-item">User Story Applied</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">2020</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../2020/about_consulting/" class="dropdown-item">About Consulting</a>
</li>
                                    
<li>
    <a href="../../2020/arduino_introduction/" class="dropdown-item">Arduino Introduction</a>
</li>
                                    
<li>
    <a href="../../2020/azure_design_pattern/" class="dropdown-item">Azure Design Pattern</a>
</li>
                                    
<li>
    <a href="../../2020/china_70_anniversary_bigdata/" class="dropdown-item">China 70 Anniversary Big Data</a>
</li>
                                    
<li>
    <a href="../../2020/data_science_basic/" class="dropdown-item">Data Science Basic</a>
</li>
                                    
<li>
    <a href="../../2020/enlightenment_from_singing/" class="dropdown-item">Enlightenment from Singing</a>
</li>
                                    
<li>
    <a href="../../2020/intelligent_web_sentences/" class="dropdown-item">Intelligent Web Sentences</a>
</li>
                                    
<li>
    <a href="../../2020/mac_tips/" class="dropdown-item">Mac Tips</a>
</li>
                                    
<li>
    <a href="../../2020/xiao_gou_qian_qian/" class="dropdown-item">Book note: Xiao Gou Qian Qian</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">2021</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../2021/measure_anything/" class="dropdown-item">Measure Anything</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../https/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../nodejs_basics/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#microservices-introduction" class="nav-link">Microservices Introduction</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#table-of-contents" class="nav-link">Table of Contents</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#microservices-design-principles" class="nav-link">Microservices Design Principles</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#high-cohesion" class="nav-link">High cohesion</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#autonomous" class="nav-link">Autonomous</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#business-domain-centric" class="nav-link">Business Domain Centric</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#resilience" class="nav-link">Resilience</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#observable" class="nav-link">Observable</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#automation" class="nav-link">Automation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#microservices-development-strategy" class="nav-link">Microservices Development Strategy</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#synchronous-communication" class="nav-link">Synchronous communication</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#asynchronous-communication" class="nav-link">Asynchronous communication</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#hosting-platforms-registration-and-discovery" class="nav-link">Hosting Platforms: Registration and Discovery</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#observable-microservices-monitoring-tech" class="nav-link">Observable Microservices: Monitoring Tech</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#observable-microservices-logging-tech" class="nav-link">Observable Microservices: Logging Tech</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#microservices-performance-caching" class="nav-link">Microservices Performance: Caching</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#microservices-performance-api-gateway" class="nav-link">Microservices Performance: API Gateway</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#for-greenfield-microservices" class="nav-link">For Greenfield Microservices</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#microservices-provisos" class="nav-link">Microservices Provisos</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#richardson-maturity-model" class="nav-link">Richardson Maturity Model</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#patterns" class="nav-link">Patterns</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#saga" class="nav-link">Saga</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#event-sourcing-cqrs" class="nav-link">Event sourcing &amp; CQRS</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#data-integration-patterns" class="nav-link">Data Integration patterns</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#circuit-breaker-pattern" class="nav-link">Circuit breaker pattern</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#multiple-tenants-app" class="nav-link">Multiple tenants app</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#other-patterns" class="nav-link">Other patterns</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#tools" class="nav-link">Tools</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#signalr" class="nav-link">SignalR</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#service-bus" class="nav-link">Service bus</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="microservices-introduction">Microservices Introduction</h1>
<p><strong>Published:</strong> Mar 07, 2018
<strong>Tags:</strong> architecture, cloud
<strong>Category:</strong> ComputerScience</p>
<p>Microservice is a software architecture style, in which complex applications are composed of small, autonomous process communicating with each other using language-agnostic API, which is a very common cloud pattern.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<h1 id="microservices-design-principles">Microservices Design Principles</h1>
<h2 id="high-cohesion">High cohesion</h2>
<p>High cohesion means single focus and single responsibility.
It follows SOLID principle, which means service only change for one reason.</p>
<h2 id="autonomous">Autonomous</h2>
<ul>
<li>Loose coupling</li>
<li>Honor contracts and interfaces</li>
<li>Stateless</li>
<li>Independently changeable</li>
<li>Independently deployable</li>
<li>Backwards compatible</li>
<li>Concurrent development</li>
</ul>
<p>Approach:</p>
<ul>
<li>Communication by network: synchronous, asynchronous (publish/subscribe to events)</li>
<li>Technology agnostic API</li>
<li>Avoid client libraries</li>
<li>Contracts between services: fixed and agreed interfaces, shared models, clear input and output</li>
<li>Avoid chatty exchanges between services</li>
<li>Avoid sharing between services: databases, shared libraries</li>
<li>Microservice ownership by team: responsibility to make autonomous, agreeing contracts between teams, responsible for long-term maintenance, collaborative development (communicate contract requirements, communicate data requirements), concurrent development</li>
<li>Versioning: avoid breaking changes, backwards compatibility, integration tests, have a versioning strategy (concurrent versions: old and new; semantic versioning: Major.Minor.Patch (e.g. 15.1.2); coexisting endpoints: /V2/customer/)</li>
</ul>
<h2 id="business-domain-centric">Business Domain Centric</h2>
<ul>
<li>Service represents business function</li>
<li>Scope of service and identify boundaries (Bounded context from DDD)</li>
<li>Shuffle code if required: group related code into a service, aim for high cohesion</li>
<li>Responsive to business change</li>
</ul>
<p>Approach:</p>
<ul>
<li>Identify business domains in a coarse manner, review sub groups of business functions or areas</li>
<li>Review benefits of splitting further and fix incorrect boundaries: merge or split</li>
<li>Agree a common language</li>
<li>Microservices for data (CRUD) or functions</li>
<li>Explicit interfaces for outside world</li>
<li>Splitting using technical boundaries</li>
</ul>
<h2 id="resilience">Resilience</h2>
<ul>
<li>Embrace failure: start another service rather than spend energy to protect service</li>
<li>Multiple instances: register on startup, deregister on failure</li>
<li>Types of failure: exceptions &amp; errors, delays, unavailability</li>
<li>Validate input: service to service, client to service</li>
</ul>
<p>Approach</p>
<ul>
<li>Design for known failures</li>
<li>Failure of downstream systems: e.g. other services internal or external</li>
<li>Degrade functionality on failure detection</li>
<li>Default functionality on failure detection</li>
<li>Design system to fail fast</li>
<li>Use timeouts: use for connected systems, timeout our requests after a threshold, service to service, service to other systems, standard timeout length, adjust length on a case by case basis</li>
<li>Monitor and log timeouts</li>
</ul>
<h2 id="observable">Observable</h2>
<ul>
<li>System health: status, logs, errors</li>
<li>Centralized monitoring &amp; logging</li>
<li>Distributed transactions</li>
<li>Quick problem solving</li>
<li>Quick deployment requires feedback</li>
<li>Data used for capacity planning &amp; scaling</li>
<li>To understand what is actually used</li>
<li>Monitor business data</li>
</ul>
<p>Approach:</p>
<ul>
<li>Real-time monitoring</li>
<li>Monitor the host: CPU, memory, disk usage, etc.</li>
<li>Expose metrics within the services: response times, timeouts, exceptions and errors</li>
<li>Business data related metrics: e.g. number of orders, average time from basket to checkout</li>
<li>Collect and aggregate monitoring data: monitoring tools that provide aggregation, monitoring tools that provide drill down options</li>
<li>Monitoring tool that can help visualise trends, compare data across servers, trigger alerts</li>
<li>When to log: startup or shutdown, code path milestones (requests, responses and decisions), timeouts, exceptions and errors</li>
<li>Structured logging: level (information, error, debug, statistic), date and time, correlation id, host name, service name and service instance, message</li>
<li>Traceable distributed transactions: correlation id passed service to service</li>
</ul>
<h2 id="automation">Automation</h2>
<p>Tools to reduce testing, provide quick feedback, and quick deployment</p>
<p><img alt="image" src="../images/principles_table.png" /></p>
<h1 id="microservices-development-strategy">Microservices Development Strategy</h1>
<h2 id="synchronous-communication">Synchronous communication</h2>
<ul>
<li>Request response communication: client to service, service to service, service to external</li>
<li>Remote procedure call: sensitive to change</li>
<li>HTTP: work across the internet, firewall friendly</li>
<li>REST: CRUD using HTTP verbs, natural decoupling, open communication protocol, REST with HATEOAS (Hypermedia As The Engine Of Application State)</li>
<li>Synchronous issues: both parties have to be available, performance subject to network quality, clients must know location of service (host\port)</li>
</ul>
<h2 id="asynchronous-communication">Asynchronous communication</h2>
<ul>
<li>Event based: mitigates the need of client and service availability, decouples client and service</li>
<li>Message queueing protocol: message Brokers, subscriber and publisher are decoupled, microsoft message queuing (MSMQ), RabbitMQ, ATOM (HTTP to propagate events)</li>
<li>Asynchronous challenge: complicated, reliance on message broker, visibility of the transaction, managing the messaging queue</li>
<li>Real world systems: would use both synchronous and asynchronous</li>
</ul>
<h2 id="hosting-platforms-registration-and-discovery">Hosting Platforms: Registration and Discovery</h2>
<ul>
<li>The main problem to resolve: host, port and version</li>
<li>Service registry database</li>
<li>Register on startup</li>
<li>Deregister service on failure</li>
<li>Cloud platforms make it easy</li>
<li>Local platform registration options: self registration, third-party registration</li>
<li>Local platform discovery options: client-side discovery, server-side discovery</li>
</ul>
<h2 id="observable-microservices-monitoring-tech">Observable Microservices: Monitoring Tech</h2>
<ul>
<li>Centralised tools: Nagios, PRTG, New Relic</li>
<li>Desired features: metrics across servers, automatic or minimal configuration, client libraries to send metrics, test transactions support, alerting</li>
<li>Network monitoring</li>
<li>Standardise monitoring: central tool, preconfigured virtual machines or containers</li>
<li>Real-time monitoring</li>
</ul>
<h2 id="observable-microservices-logging-tech">Observable Microservices: Logging Tech</h2>
<ul>
<li>Portal for centralised logging data: Elastic log, Log stash, Splunk, Kibana, Graphite</li>
<li>Client logging libraries: Serilog and many more...</li>
<li>Desired features: structured logging, logging across servers, automatic or minimal configuration, correlation (context id) for transactions,</li>
<li>Standardise logging: central tool, template for client library</li>
</ul>
<h2 id="microservices-performance-caching">Microservices Performance: Caching</h2>
<ul>
<li>Caching to reduce: client calls to services, service calls to databases, service to service calls</li>
<li>API gateway (proxy) level</li>
<li>Client &amp; service side</li>
<li>Considerations: simple to setup and manage, be careful about data leaks</li>
</ul>
<h2 id="microservices-performance-api-gateway">Microservices Performance: API Gateway</h2>
<ul>
<li>Help with performance: load balancing, caching</li>
<li>Help with: creating central entry point, exposing services to clients, one interface to many services, dynamic location of services, routing to specific instance of service, service registry database</li>
<li>Security: dedicated security service, central security vs service level</li>
</ul>
<h2 id="for-greenfield-microservices">For Greenfield Microservices</h2>
<ul>
<li>Start off with monolithic design: high level, evolving seams, develop areas into modules, boundaries start to become clearer, refine and refactor design, split further when required</li>
<li>Modules become services</li>
<li>Shareable code libraries promote to service</li>
<li>Review microservice principles at each stage</li>
<li>Prioritise by: minimal viable product, customer needs and demand</li>
</ul>
<h2 id="microservices-provisos">Microservices Provisos</h2>
<ul>
<li>Accepting initial expense: longer development times, cost and training for tools and new skills</li>
<li>Skilling up for distributed systems: handling distributed transactions, handling reporting</li>
<li>Additional testing resource: latency and performance testing, testing for resilience</li>
<li>Improving infrastructure: security, performance, reliance</li>
<li>Overhead to mange microservices</li>
</ul>
<h2 id="richardson-maturity-model">Richardson Maturity Model</h2>
<p>http://martinfowler.com/articles/richardsonMaturityModel.html</p>
<p><img alt="image" src="../images/glory_of_rest.png" /></p>
<h1 id="patterns">Patterns</h1>
<h2 id="saga">Saga</h2>
<p>A saga is a class that represents a running instance of a business process.</p>
<p>Depending on the actual capabilities of the bus you use, the saga can be persisted, suspended and resumed as appropriate.</p>
<p>See more details in the following URL:
https://docs.particular.net/nservicebus/sagas/</p>
<h2 id="event-sourcing-cqrs">Event sourcing &amp; CQRS</h2>
<p>Event sourcing contain all the event and changes.</p>
<p>By adding event sourcing to an application, you get a hold of raw data.</p>
<p>By combining event sourcing and CQRS you end up with raw business events stored in the command stack properly denormalized for the sake of the application core functions.</p>
<p>At any time, though, you can add an extra module that reads raw data and transforms that into other meaningful chunks of information for whatever business purpose you might have.</p>
<p>When it comes to highlighting the benefits of event sourcing, the first point usually mentioned is this: with events you never miss a thing of what happens within the system.</p>
<p><img alt="image" src="../images/multiple_projections.png" /></p>
<p>In a create, read, update, delete (CRUD) system, you typically have one representation of data - mostly relational - and one or more simple projects that most of the time just adapter tabular data to the needs of the presentation layer.</p>
<p>With event sourcing, you take this model much further, and lowering the abstraction level of the stored data is the key factor.
The more domain-accurate information you store, the richer and more numerious projections you can build at any later time.</p>
<p>An approach to persistence that concentrates on persisting all the changes to a persistent state, rather than persisting the current application state itself.
Combined the usage of snapshot.</p>
<p>See details in article:
https://msdn.microsoft.com/en-us/magazine/mt793267.aspx</p>
<h2 id="data-integration-patterns">Data Integration patterns</h2>
<p>The four most common design patterns for data integration are broadcast, aggregation, bidirectional synchronization and correlation.</p>
<h2 id="circuit-breaker-pattern">Circuit breaker pattern</h2>
<ul>
<li>Circuit breaker pattern prevent repeatedly trying to execute an operation that is likely to fail</li>
<li>The circuit breaker is a proxy that monitors the number of recent failures</li>
<li>Prevents wasting valuable resources because of the wait</li>
<li>Normally, the client has some retry logic</li>
</ul>
<h2 id="multiple-tenants-app">Multiple tenants app</h2>
<ul>
<li>Per-tenant cost</li>
<li>Scale: number of tenants, data volume, workload</li>
<li>Tenant isolation: security, performance, lifetime management, etc</li>
<li>business continuity, disaster recovery</li>
<li>customization per-tenant (for some ISVs)</li>
</ul>
<p><img alt="image" src="../images/tenant_isolation.png" /></p>
<h2 id="other-patterns">Other patterns</h2>
<ul>
<li>Actor Model: http://www.brianstorti.com/the-actor-model/</li>
<li>Content Delivery Network (CDN) pattern</li>
<li>Uploading to storage: Do not use web server to do upload, use storage service</li>
<li>Scale up &amp; scale out:</li>
</ul>
<p><img alt="image" src="../images/scale_up_and_out.png" /></p>
<h1 id="tools">Tools</h1>
<h2 id="signalr">SignalR</h2>
<p>ASP.NET SignalR is a new library for ASP.NET developers that makes it incredibly simple to add real-time web functionality to your applications.
It's the ability to have your server-side code push content to the connected clients as it happens, in real-time.</p>
<p>You may have heard of WebSockets, a new HTML5 API that enables bi-directional communication between the browser and server. SignalR will use WebSockets under the covers when it's available, and gracefully fallback to other techniques and technologies when it isn't, while your application code stays the same.</p>
<p>SignalR also provides a very simple, high-level API for doing server to client RPC (call JavaScript functions in your clients' browsers from server-side .NET code) in your ASP.NET application, as well as adding useful hooks for connection management, e.g. connect/disconnect events, grouping connections, authorization.</p>
<h2 id="service-bus">Service bus</h2>
<p><img alt="image" src="../images/service_bus.png" /></p>
<ul>
<li>NServiceBus: .net service bus. Keep the underlying transpose abstract</li>
<li>MSMQ queues: Computer management -&gt; Service and Applications -&gt; Message Queuing -&gt; Private queues</li>
<li>RabbitMQ: supports multiple platforms, MSMQ is windows native</li>
<li>Sql server</li>
<li>Azure: Queues, Service bus</li>
</ul>
<p><em>Written by Binwei@Oslo</em></p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
