<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Azure Security - Binwei's Blog</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Binwei's Blog</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Welcome to Binwei's Blog</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">2017</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../2017/authenticate_by_openidconnect/" class="dropdown-item">Authenticate Node.js App by OpenId Connect</a>
</li>
                                    
<li>
    <a href="../../2017/bash_useful_commands/" class="dropdown-item">How to Become an Outlier</a>
</li>
                                    
<li>
    <a href="../../2017/become_outlier/" class="dropdown-item">How to Become an Outlier</a>
</li>
                                    
<li>
    <a href="../../2017/blockchain_introduction/" class="dropdown-item">Blockchain Introduction</a>
</li>
                                    
<li>
    <a href="../../2017/book-bian_zhi_lin_shi_xuan/" class="dropdown-item">Book notes: Bian Zhi Lin Anthology</a>
</li>
                                    
<li>
    <a href="../../2017/book-cai_gen_tan/" class="dropdown-item">Book Notes: Cai Gen Tan</a>
</li>
                                    
<li>
    <a href="../../2017/cloud_for_dummy/" class="dropdown-item">Cloud for Dummy</a>
</li>
                                    
<li>
    <a href="../../2017/devops_and_continuous_delivery/" class="dropdown-item">DevOps and Continuous Delivery</a>
</li>
                                    
<li>
    <a href="../../2017/domain_driven_design_introduction/" class="dropdown-item">Domain Driven Design: Introduction</a>
</li>
                                    
<li>
    <a href="../../2017/git_areas/" class="dropdown-item">Git: Areas</a>
</li>
                                    
<li>
    <a href="../../2017/git_branch-basic/" class="dropdown-item">Git: Branch Basic</a>
</li>
                                    
<li>
    <a href="../../2017/git_branch-continued/" class="dropdown-item">Git: Branch Continue</a>
</li>
                                    
<li>
    <a href="../../2017/git_getting-started/" class="dropdown-item">Git: Getting Started</a>
</li>
                                    
<li>
    <a href="../../2017/git_resolve-conflicts/" class="dropdown-item">Git: Resolve Conflicts</a>
</li>
                                    
<li>
    <a href="../../2017/how_to_read_books/" class="dropdown-item">How to Read Books</a>
</li>
                                    
<li>
    <a href="../../2017/introduction_to_javascript/" class="dropdown-item">Introduction to Javascript</a>
</li>
                                    
<li>
    <a href="../../2017/job_security/" class="dropdown-item">Job Security</a>
</li>
                                    
<li>
    <a href="../../2017/kotter_binwei_change_model/" class="dropdown-item">Kotter-Binwei Change Model</a>
</li>
                                    
<li>
    <a href="../../2017/lean_principles/" class="dropdown-item">Lean: Principles</a>
</li>
                                    
<li>
    <a href="../../2017/lean_toolkit_for_software_development/" class="dropdown-item">Lean Toolkit for Software Development</a>
</li>
                                    
<li>
    <a href="../../2017/nosql_introduction/" class="dropdown-item">NoSQL: Introduction</a>
</li>
                                    
<li>
    <a href="../../2017/security_owasp_top_10/" class="dropdown-item">Security: Owasp Top 10</a>
</li>
                                    
<li>
    <a href="../../2017/setup-blog_using-sphinx-ablog/" class="dropdown-item">Setup Blog: Using Sphinx and Ablog</a>
</li>
                                    
<li>
    <a href="../../2017/specification_by_example/" class="dropdown-item">Specification by Example</a>
</li>
                                    
<li>
    <a href="../../2017/technology_to_learn_next/" class="dropdown-item">Technology to Learn Next</a>
</li>
                                    
<li>
    <a href="../../2017/telemetry_overview/" class="dropdown-item">Telemetry: Overview</a>
</li>
                                    
<li>
    <a href="../../2017/the_art_of_simplicity/" class="dropdown-item">The Art of Simplicity</a>
</li>
                                    
<li>
    <a href="../../2017/the_effective_executive/" class="dropdown-item">The Effective Executive</a>
</li>
                                    
<li>
    <a href="../../2017/the_mckinsey_engagement/" class="dropdown-item">The Mckinsey Engagement</a>
</li>
                                    
<li>
    <a href="../../2017/the_mythical_deadline_of_peopleware_man_month/" class="dropdown-item">The Mythical Deadline of Peopleware Man-month</a>
</li>
                                    
<li>
    <a href="../../2017/threat_modeling_introduction/" class="dropdown-item">Threat Modeling: Introduction</a>
</li>
                                    
<li>
    <a href="../../2017/vi_configuration-example/" class="dropdown-item">Vi: Configuration Example</a>
</li>
                                    
<li>
    <a href="../../2017/work_in_big_company/" class="dropdown-item">Work in Big Company</a>
</li>
                                    
<li>
    <a href="../../2017/xunit_test_patterns/" class="dropdown-item">Xunit Test Patterns</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">2018</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../2018/ai_for_smartcities/" class="dropdown-item">AI for Smart Cities</a>
</li>
                                    
<li>
    <a href="../../2018/authentication_authorization_explainations/" class="dropdown-item">Authentication &amp; Authorization Basic</a>
</li>
                                    
<li>
    <a href="../../2018/blockchain_scenario/" class="dropdown-item">Blockchain Scenario</a>
</li>
                                    
<li>
    <a href="../../2018/career_advice/" class="dropdown-item">职场菜根谭</a>
</li>
                                    
<li>
    <a href="../../2018/cryptography_introduction/" class="dropdown-item">Cryptography Introduction (with .NET code example)</a>
</li>
                                    
<li>
    <a href="../../2018/docker_introduction/" class="dropdown-item">Docker Introduction</a>
</li>
                                    
<li>
    <a href="../../2018/https/" class="dropdown-item">Https Explainations</a>
</li>
                                    
<li>
    <a href="../../2018/microservices_introduction/" class="dropdown-item">Microservices Introduction</a>
</li>
                                    
<li>
    <a href="../../2018/nodejs_basics/" class="dropdown-item">Node.js Basics</a>
</li>
                                    
<li>
    <a href="../../2018/personal_branding/" class="dropdown-item">Personal Branding</a>
</li>
                                    
<li>
    <a href="../../2018/the_personal_mba/" class="dropdown-item">The Personal MBA</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">2019</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../agile_selling/" class="dropdown-item">Agile Selling</a>
</li>
                                    
<li>
    <a href="../application_insight_introduction/" class="dropdown-item">Application Insight Introduction</a>
</li>
                                    
<li>
    <a href="../azure_datalake_warehouse/" class="dropdown-item">Azure Data Lake and Warehouse</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Azure Security</a>
</li>
                                    
<li>
    <a href="../cyber_security_for_blockchain/" class="dropdown-item">Cyber Security for Blockchain</a>
</li>
                                    
<li>
    <a href="../iot_for_smartcities/" class="dropdown-item">Iot for Smart Cities</a>
</li>
                                    
<li>
    <a href="../machine_learning_basic/" class="dropdown-item">Machine Learning Basic</a>
</li>
                                    
<li>
    <a href="../user_story_applied/" class="dropdown-item">User Story Applied</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">2020</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../2020/about_consulting/" class="dropdown-item">About Consulting</a>
</li>
                                    
<li>
    <a href="../../2020/arduino_introduction/" class="dropdown-item">Arduino Introduction</a>
</li>
                                    
<li>
    <a href="../../2020/azure_design_pattern/" class="dropdown-item">Azure Design Pattern</a>
</li>
                                    
<li>
    <a href="../../2020/china_70_anniversary_bigdata/" class="dropdown-item">China 70 Anniversary Big Data</a>
</li>
                                    
<li>
    <a href="../../2020/data_science_basic/" class="dropdown-item">Data Science Basic</a>
</li>
                                    
<li>
    <a href="../../2020/enlightenment_from_singing/" class="dropdown-item">Enlightenment from Singing</a>
</li>
                                    
<li>
    <a href="../../2020/intelligent_web_sentences/" class="dropdown-item">Intelligent Web Sentences</a>
</li>
                                    
<li>
    <a href="../../2020/mac_tips/" class="dropdown-item">Mac Tips</a>
</li>
                                    
<li>
    <a href="../../2020/xiao_gou_qian_qian/" class="dropdown-item">Book note: Xiao Gou Qian Qian</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">2021</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../2021/measure_anything/" class="dropdown-item">Measure Anything</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../azure_datalake_warehouse/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../cyber_security_for_blockchain/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#azure-security" class="nav-link">Azure Security</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#table-of-contents" class="nav-link">Table of Contents</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#security-basics" class="nav-link">Security Basics</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#key-security-areas" class="nav-link">Key Security Areas</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#security-terminology" class="nav-link">Security terminology</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#azure-security-services-overview" class="nav-link">Azure security services overview</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#identity-and-access" class="nav-link">Identity and Access</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#network-security" class="nav-link">Network Security</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#data-protection" class="nav-link">Data Protection</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#protecting-secrets" class="nav-link">Protecting secrets</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#system-integrity" class="nav-link">System integrity</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#insight" class="nav-link">Insight</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#authentication-options" class="nav-link">Authentication Options</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#authentication-in-the-public-cloud" class="nav-link">Authentication in the Public cloud</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#azure-active-directory" class="nav-link">Azure Active Directory</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#active-directory-domain-services" class="nav-link">Active Directory Domain services</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#custom-domain-name" class="nav-link">Custom domain name</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#azure-ad-connect" class="nav-link">Azure AD Connect</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#privileged-identity-management-azure-ad-p2" class="nav-link">Privileged Identity management: Azure AD P2</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#identity-as-a-service" class="nav-link">Identity as a service</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#azure-key-vault" class="nav-link">Azure Key Vault</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#authentication-and-authorization" class="nav-link">Authentication and Authorization</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#networking" class="nav-link">Networking</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#other-services-and-practices" class="nav-link">Other Services and practices</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#azure-security-center" class="nav-link">Azure Security Center</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#azure-trust-center" class="nav-link">Azure Trust center</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#virtual-machines" class="nav-link">Virtual Machines</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#password-user-account-policies" class="nav-link">Password / User Account Policies</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#database-access-requirements" class="nav-link">Database Access Requirements</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#resource-and-role" class="nav-link">Resource and Role</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="azure-security">Azure Security</h1>
<p><strong>Published:</strong> April 19, 2019
<strong>Tags:</strong> security, cloud
<strong>Category:</strong> ComputerScience</p>
<p>Cyber Security is important aspect to digital transformation.
To use Azure well, the understanding of the security building blocks is crucial.</p>
<p>https://docs.microsoft.com/en-us/azure/security/azure-security-getting-started</p>
<h2 id="table-of-contents">Table of Contents</h2>
<h1 id="security-basics">Security Basics</h1>
<p>Every company has some level of security requirement that stretches across almost every element of the business.
It's important to think of security in layers rather than a single protection element.</p>
<p>Defense in Depth: The best security is based on layers of protection and this is especially true with networking.
See following picture.</p>
<p><img alt="image" src="../images/defense_in_depth.png" /></p>
<p>It's also important to ensure security while not crippling the business ability to operate.
Make security a core step of any new project, of change control, of anything you do.</p>
<h2 id="key-security-areas">Key Security Areas</h2>
<p>+---------------------------+-----------------------------------------------+
| Identity and access       | Being sure you are who you say you are        |
+---------------------------+-----------------------------------------------+
| Network security          | Secure access, isolation, and publishing      |
+---------------------------+-----------------------------------------------+
| Data protection           | Encryption of data at rest and in transit     |
+---------------------------+-----------------------------------------------+
| Protecting secrets        | Keys, certificates, credentials               |
+---------------------------+-----------------------------------------------+
| System integrity          | Patched, protected, etc                       |
+---------------------------+-----------------------------------------------+
| Insight                   | Auditing, system state, health                |
+---------------------------+-----------------------------------------------+</p>
<h2 id="security-terminology">Security terminology</h2>
<p>+----------------+-------------------------------------------------------------------------------+
| Asset          | People, property, or information (database, software code, company records)   |
+----------------+-------------------------------------------------------------------------------+
| Threat         | Person or process that can exploit a vulnerability (intentionally or          |
|                | accidentally) to obtain, damager, or destroy an asset                         |
+----------------+-------------------------------------------------------------------------------+
| Vulnerability  | Weakness or gap in a security program that can be exploited by threats to     |
|                | gain unauthorized access to an asset                                          |
+----------------+-------------------------------------------------------------------------------+
| Risk           | The potential for loss, damage, or destruction of an asset as a result of a   |
|                | threat exploiting a vulnerability                                             |
+----------------+-------------------------------------------------------------------------------+</p>
<h1 id="azure-security-services-overview">Azure security services overview</h1>
<h2 id="identity-and-access">Identity and Access</h2>
<ul>
<li>Azure Role Based Access Control</li>
<li>Azure Active Directory /B2C/B2B</li>
<li>Azure Multi-Factor Authentication</li>
<li>Hybrid identity with Microsoft Azure: Microsoft’s identity solutions span on-premises and cloud-based capabilities, creating a single user identity for authentication and authorization to all resources, regardless of location.</li>
</ul>
<h2 id="network-security">Network Security</h2>
<ul>
<li>Network Security Groups: While Virtual Network (VNET) is the cornerstone of Azure networking model and provides isolation and protection. Network Security Group (NSG) is the main tool you need to use to enforce and control network traffic rules at the networking level. Customers can control access by permitting or denying communication between the workloads within a virtual network, from systems on customer’s networks via cross-premises connectivity, or direct Internet communication.</li>
<li>Azure VPN Gateway: A VPN gateway is a specific type of virtual network gateway that is used to send encrypted traffic between an Azure virtual network and an on-premises location over the public Internet.</li>
<li>Azure Application Gateway: Azure Application Gateway is a web traffic load balancer that enables you to manage traffic to your web applications.</li>
<li>Azure Load Balancer: With Azure Load Balancer, you can scale your applications and create high availability for your services.</li>
<li>Azure Traffic Manager: Azure Traffic Manager is a DNS-based traffic load balancer that enables you to distribute traffic optimally to services across global Azure regions, while providing high availability and responsiveness.</li>
<li>Azure Application Proxy: Azure Active Directory's Application Proxy provides secure remote access to on-premises web applications. After a single sign-on to Azure AD, users can access both cloud and on-premises applications through an external URL or an internal application portal.</li>
<li>Route Control and Forced Tunneling: Forced tunneling lets you redirect or "force" all Internet-bound traffic back to your on-premises location via a Site-to-Site VPN tunnel for inspection and auditing.</li>
<li>Virtual Network Security Appliances: Use your favorite network virtual appliances in Azure</li>
<li>Azure Virtual Network: Your private network in the cloud</li>
<li>Express Route: Experience a faster, private connection to Azure</li>
<li>Internal DNS &amp; Azure DNS</li>
</ul>
<h2 id="data-protection">Data Protection</h2>
<p>Azure Storage Security</p>
<ul>
<li>Azure Storage Service Encryption (for data at rest)</li>
<li>StorSimple Encrypted Hybrid Storage (an integrated storage solution that manages storage tasks between on-premises devices and Azure cloud storage.)</li>
<li>Azure Client-Side Encryption</li>
<li>Azure Storage Shared Access Signatures</li>
<li>Azure Storage Account Keys</li>
<li>Azure File Shares with SMB 3.0 Encryption: The Server Message Block (SMB) protocol is a network file sharing protocol that allows applications on a computer to read and write to files and to request services from server programs in a computer network. The SMB protocol can be used on top of its TCP/IP protocol or other network protocols. Using the SMB protocol, an application (or the user of an application) can access files or other resources at a remote server. This allows applications to read, create, and update files on the remote server. It can also communicate with any server program that is set up to receive an SMB client request.</li>
<li>Azure Storage Analytics</li>
<li>Role-based access control (RBAC)</li>
<li>Encryption in Transit</li>
<li>Enabling Browser-based clients using CORS</li>
</ul>
<p><img alt="image" src="../images/azure_data_encryption.png" /></p>
<p>Do not copy production db, but use SQL DB Data Masking</p>
<p>Backup and Disaster Recovery</p>
<ul>
<li>Azure Backup</li>
<li>Azure Site Recovery</li>
</ul>
<p>Azure Database Security</p>
<ul>
<li>Azure SQL Firewall</li>
<li>Azure SQL Authentication</li>
<li>Azure SQL Transparent Data Encryption: Transparent Data Encryption (TDE) encrypts SQL Server, Azure SQL Database, and Azure SQL Data Warehouse data files, known as encrypting data at rest.</li>
<li>Azure SQL Database Auditing</li>
</ul>
<h2 id="protecting-secrets">Protecting secrets</h2>
<p>Azure Key Vault</p>
<h2 id="system-integrity">System integrity</h2>
<p>Applications</p>
<ul>
<li>Web Application vulnerability scanning</li>
<li>Penetration testing</li>
<li>Web Application firewall (WAF)</li>
<li>Layered Security Architecture</li>
<li>Web server diagnostics and application diagnostics</li>
<li>Antimalware &amp; Antivirus</li>
<li>Hardware Security Module</li>
<li>Virtual machine backup</li>
<li>VM Disk Encryption (IaaS VM disk)</li>
<li>Patch updates</li>
<li>Security policy management and reporting</li>
</ul>
<h2 id="insight">Insight</h2>
<ul>
<li>Operations Management Suite Security and Audit Dashboard</li>
<li>Azure Resource Manager</li>
<li>Application Insights</li>
<li>Azure Monitor</li>
<li>Log Analytics</li>
<li>Azure Advisor</li>
<li>Azure Security Center</li>
</ul>
<h1 id="authentication-options">Authentication Options</h1>
<h2 id="authentication-in-the-public-cloud">Authentication in the Public cloud</h2>
<p>Communication over the public cloud has to be focused on protocols commonly available.
HPPTS is preferred and often required because it is encrypted with SSL.</p>
<p>Authentication commonly used:</p>
<ul>
<li>OAuth</li>
<li>OAuth 2 (used by Azure AD)</li>
<li>SAML</li>
</ul>
<h2 id="azure-active-directory">Azure Active Directory</h2>
<ul>
<li>Provide access to web-based services</li>
<li>Identity infrastructure of the future</li>
<li>Expanding constantly</li>
<li>Limited but growing features</li>
<li>Limited control over user environment</li>
</ul>
<h2 id="active-directory-domain-services">Active Directory Domain services</h2>
<ul>
<li>Access to on-premises resources</li>
<li>Current and past identity infrastructure</li>
<li>Been pretty constant for over a decade</li>
<li>Full featured implementation</li>
<li>Infrastructure is built and maintained</li>
<li>Fine-grain control of user environment</li>
<li>Applications within the configured virtual network can leverage Azure AD in a similar way to AD DS (LDAP, join domain, Kerberos, NTLM)</li>
<li>Useful where AD DS needed but don't want the management or cost of traditional AD DS</li>
</ul>
<p><img alt="image" src="../images/authentication_options.png" /></p>
<p><img alt="image" src="../images/authentication_options_2.png" /></p>
<h2 id="custom-domain-name">Custom domain name</h2>
<ul>
<li>To simplify the full name of azure AD url</li>
<li>Verify through your own hosting website (e.g. hostmonster)</li>
</ul>
<h2 id="azure-ad-connect">Azure AD Connect</h2>
<p>Azure AD Connect tool is to connect the local AD to Azure AD.</p>
<p>And you can activate or deactivate the sync between Azure AD and local AD.</p>
<p>Azure AD Connect !== AD Federation</p>
<h2 id="privileged-identity-management-azure-ad-p2">Privileged Identity management: Azure AD P2</h2>
<p>No standing privileges is a common security goal.
Ideally accounts have privileges elevated only when required.</p>
<p>Azure AD Privileged Identity Management (PIM) enables users/groups to have roles assigned.
The user must then request elevation, typically also with MFA along with an optional comment.
The elevation is for a configurable amount of time per role.</p>
<p>A big focus is for a single identity across all systems and clouds.
It is critical that the identity is as secure and monitored as possible.</p>
<p>Azure AD Identity Protection provides a centralized view of risk events, risk users and vulnerabilities.
Can be utilized as part of conditional access to add user risk level as a condition.</p>
<p>Typical Capabilities</p>
<ul>
<li>Browser Based Authentication</li>
<li>Mobile Device Authentication</li>
<li>Multi-Factor Authentication</li>
<li>Login to your corporate directory</li>
<li>Single Sign On (to SaaS apps)</li>
<li>Social Login</li>
</ul>
<p><img alt="image" src="../images/azure_security_case_study_1.png" /></p>
<h2 id="identity-as-a-service">Identity as a service</h2>
<p>How else does IDaaS help?</p>
<ul>
<li>DDOS prevention at the provider, not at your app</li>
<li>User Management</li>
<li>Block suspicious login</li>
<li>Prompt for MFA</li>
<li>Protocol based protection at the app (OpenlD Connect / OAuth2)</li>
<li>Centralized user management</li>
<li>Audit logs, reports</li>
<li>Compliance</li>
</ul>
<h1 id="azure-key-vault">Azure Key Vault</h1>
<p>An Azure resource provider backed by pools of hardware security modules (HSMs)</p>
<p>Provides storage:</p>
<ul>
<li>Secrets - Pieces of data (under 25KB) that can be stored and retrieved</li>
<li>Keys - Stored and then used within the key vault to perform cryptographic operations (but cannot be retrieved)</li>
<li>Certificates - Management of x509 certificates including lifecycle</li>
</ul>
<h2 id="authentication-and-authorization">Authentication and Authorization</h2>
<p>Authentication is via Azure AD OAuth2 tokens.</p>
<p>Authorization is via Access Control List (ACL) on the key vault.</p>
<p>Typical structure is as follows: Key Vault Owner; Key/Secret Owner; App Operator; Auditor</p>
<ul>
<li>Store your private keys, shared secrets, other connections, securely</li>
<li>FIPS (Federal Information Processing Standard) compliant option HSM storage ($$)</li>
<li>Examples: Private keys, certs, passwords; Connection strings; Secrets and account names for service bus, storage, search, redis, etc.</li>
</ul>
<h1 id="networking">Networking</h1>
<p>Connecting Virtual Networks</p>
<ul>
<li>If Virtual networks exist in the same region and use the same Azure AD tenant network peering can be used to connect them using the Azure backbone network</li>
<li>Another option is to utilize site-to-site VPN or ExpressRoute where network peering is not possible</li>
<li>Site-to-site VPN or ExpressRoute are used to connect to on-premises locations</li>
</ul>
<p><img alt="image" src="../images/virtual_network.png" /></p>
<p>NSG Rules: Rules are based on 5-tuple and have priority and action (allow or deny)</p>
<ul>
<li>Source IP address (can be a range using CIDR format)</li>
<li>Source port</li>
<li>Destination IP address (can be a range using CIDR format)</li>
<li>Destination port</li>
<li>Protocol (TCP, UDP, or * )</li>
</ul>
<p><img alt="image" src="../images/network_security_groups_example.png" /></p>
<p>Non-VNet Azure Services</p>
<ul>
<li>Most non-laaS services do not directly integrate with VNets</li>
<li>The services have an Internet public facing endpoint</li>
<li>Some services provide a configurable firewall to control access based on public IP address and if from an Azure service</li>
<li>When enabling for Azure services it means any service for any tenant running in Azure</li>
<li>If more granularity required, look to utilize a public IP from the source service and restrict based on that IP</li>
</ul>
<p>Virtual Appliances</p>
<ul>
<li>A large number of virtual appliances are available in the Azure Marketplace</li>
<li>Licensing can be based on: Bring your own license or Hourly billing</li>
<li>Essentially a VM with pre-configured software and configuration to perform a certain set of functionality</li>
<li>Common examples include firewalls and load balancers</li>
</ul>
<p>Azure Application Gateway</p>
<ul>
<li>A layer 7 reverse-proxy solution</li>
<li>Terminates the client connection and forwards requests to target</li>
<li>Application protocols support HTTP, HTTPS and WebSockets</li>
<li>Supports SSL termination (offloading the CPU from the endpoints)</li>
<li>Internet facing and Internal (VNet) applications</li>
<li>Provides a layer of abstraction from the requesting client and the back-end service</li>
</ul>
<p>Web Application Firewall</p>
<ul>
<li>Optional addition to Azure Applicaiton Gateway</li>
<li>Provides a web application firewall solution</li>
<li>Implements CRS 3.0 by default (2.2.9 also available) (Core Rule Set)</li>
<li>Rules can be disabled on an individual basis if required</li>
<li>Detection or prevention mode</li>
</ul>
<p>Some practices</p>
<ul>
<li>Logically segment subnets: use nsgs for inter-subnet traffic</li>
<li>Control routing: used with virtual network applicances</li>
<li>Enable forced trunneling: constrain outbound VM traffic</li>
<li>Disable RDP/SSH: employ P2S or S2S VPNs</li>
<li>Enable Azure Security Center: Prevent, detect, and respond to threats</li>
</ul>
<h1 id="other-services-and-practices">Other Services and practices</h1>
<h2 id="azure-security-center">Azure Security Center</h2>
<p>AAA: authentication, authorization, accounting</p>
<p>SIEM (Security information and event management)</p>
<ul>
<li>Recommend actions to take to secure your VMS</li>
<li>Define policies</li>
<li>Export logs for analysis</li>
<li>Integration with Operations Management System (OMS)</li>
</ul>
<h2 id="azure-trust-center">Azure Trust center</h2>
<p>Compliance Requirements</p>
<ul>
<li>Infrastructure: ISO 27001, 0 SAS 70 Type Il, SSAE 16</li>
<li>Audit: Third party review/ NIST SP 800-53; Third party pen test OWASP or OSSTMM; Third party NESSUS scan</li>
</ul>
<p>You can see the certificates
http://azure.microsoft.com/en-us/support/trust-center/compliance/</p>
<h2 id="virtual-machines">Virtual Machines</h2>
<ul>
<li>Disabling unused services on VM i.e., no guest accounts, services run with least privilege</li>
<li>Keep machines patched, up to date</li>
<li>Updating out of date software</li>
<li>Azure Security Center can help here</li>
</ul>
<h2 id="password-user-account-policies">Password / User Account Policies</h2>
<ul>
<li>Initial password issuance</li>
<li>Password strength</li>
<li>Password reuse</li>
<li>Frequency of change</li>
<li>Admin password special requirements</li>
<li>Hash algorithms / key lengths</li>
<li>Inactivity, login failure, account blocking</li>
<li>Non-obvious account names</li>
<li>Delivery of account/password materials</li>
<li>De-provisioning / access revocation</li>
<li>No sharing of accounts</li>
</ul>
<h2 id="database-access-requirements">Database Access Requirements</h2>
<ul>
<li>Limited to individuals: Application / system accounts; Few admin / read only</li>
<li>All access to data is controlled via applications</li>
<li>Never, never, never log in to the database and fix issues directly with content/data: At least this is the goal; Build tools to solve data problems instead, track repeat offenders</li>
</ul>
<h2 id="resource-and-role">Resource and Role</h2>
<p>Azure resource manager</p>
<ul>
<li>every object is a resource</li>
<li>every resource belongs to a single resource group</li>
<li>resource groups are not a resource access boundary</li>
</ul>
<p>Resource Groups</p>
<ul>
<li>resources in a resource group should share a common lifecycle</li>
<li>Resource groups can be heterogeneous or homogeneous</li>
<li>Resource groups are not a boundary of access</li>
</ul>
<p>Role-based access control</p>
<ul>
<li>With ARM the access to resources and the actions possible can be finely controlled</li>
<li>A major use for resource group is with RBAC by grouping resources together in a resource group then delegate authority to groups of users on the resource group</li>
<li>RBAC and also apply to entire subscriptions or an individual resource</li>
<li>Enables assignment of roles at various levels: The subscription; A resource group; An individual resource</li>
<li>Assigned rights are inherited by child objects</li>
<li>Combine with Azure AD groups which contain users</li>
<li>Assign Azure AD groups to a role at the desired level</li>
</ul>
<p>Built-in roles</p>
<ul>
<li>large number of in-box roles</li>
<li>not every role applies to infrastructure</li>
<li>when looking at a resource only its relevant roles will be displayed</li>
<li>classic resource have smaller set of available roles and only at subscription level</li>
<li>select a role and a resource provider to see detailed permissions of the role</li>
</ul>
<p><em>Written by Binwei@Singapore</em></p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
